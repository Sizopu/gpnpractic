# Observability

## Общее описание

В рамках проекта была реализована **минимально-жизнеспособная система мониторинга приложения**, обеспечивающая:

- Сбор и визуализацию метрик производительности
- Проверку статуса сервисов
- Отображение актуальных данных из базы данных

## Архитектура системы

Система состоит из трёх основных компонентов:

### 1. Java-сервис (Сбор метрик и данных из PostgreSQL)

- **Назначение**: Сбор телеметрии (CPU, RAM, uptime) и данных из базы данных
- **Функции**:
  - Сбор метрик производительности сервера (загрузка CPU, использование RAM, время работы)
  - Подключение к PostgreSQL по SSL
  - Выполнение SQL-запроса: `SELECT quote FROM quotes`
  - Отдача метрик и цитат по HTTPS
- **Эндпоинты**:
  - `/metrics` — метрики производительности
  - `/quotes` — данные из таблицы `quotes`

### 2. .NET-сервис (Проверка статуса сервисов)

- **Назначение**: Проверка доступности других сервисов
- **Функции**:
  - Проверка статуса PostgreSQL, Java- и Node.js-сервисов
  - Отдача статусов `UP/DOWN`
- **Эндпоинты**:
  - `/status` — статусы других сервисов
  - `/health` — локальный health-check

### 3. Node.js-сервис (Фронтенд и агрегация данных)

- **Назначение**: Веб-интерфейс и агрегация данных от бекендов
- **Функции**:
  - Отдача HTML-страницы с графиками (Chart.js)
  - Визуализация метрик и цитат
  - Проксирование запросов к Java и .NET-сервисам
- **Эндпоинты**:
  - `/api/metrics` → Java `/metrics`
  - `/api/quotes` → Java `/quotes`
  - `/api/status` → .NET `/status`

## Визуализация

### Графики

- **Загрузка ЦПУ %**
- **Загрузка ОЗУ (MB)**
- **Время работы (секунды)**
- **Текущее кол-во пользователей** (рандомная метрика)

### Таблица цитат

- Отображение актуальных цитат из таблицы `quotes`
- Обновление каждые 10 секунд

### Индикаторы статусов

- Цветные индикаторы: зелёный (UP) / красный (DOWN)
- Отображение состояния: PostgreSQL, Java, Node.js

## SSL

Все сервисы работают по **HTTPS** с использованием самоподписанных сертификатов:

- Java: `keystore.p12`
- .NET: `cert.pfx`
- Node.js: `certificate.crt` / `private.key`

## Технологии

- **Java** — сбор метрик и подключение к PostgreSQL
- **.NET 6** — проверка статусов
- **Node.js** — фронтенд и агрегация
- **Chart.js** — визуализация графиков
- **SSL/TLS** — шифрование трафика